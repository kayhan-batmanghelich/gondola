.. raw:: html

   <!--

   ============================================================================

      DO NOT EDIT THIS FILE! It was generated using Sphinx from:

      Origin:   $URL: https://sbia-svn.uphs.upenn.edu/projects/GONDOLA/branches/gondola-1.0/doc/installation.rst $
      Revision: $Rev: 696 $

   ============================================================================

   -->

.. title:: Installation

.. raw:: latex

    \clearpage

============
Installation
============

An exhaustive list of minimum build dependencies, including the build tools
along detailed step-by-step build, test, and installation instructions can
be found in the `BASIS how-to guide on software installation`_.

Please refer to this guide first if you are uncertain about the steps
summarized here or if you have problems to build, test, or install the software
on your system. If this guide does not help you to resolve the issue, please
contact us at ``sbia-software at uphs.upenn.edu``.


Prerequisites
=============

See the :ref:`requiredpackages` and :ref:`optionalpackages` tables for a summary
of the software packages required by this software and those which are optionally
made use of if available.

For instructions on how to build or install these prerequisites, please refer to
the documentation of the respective software package and the linked how-to guides.

.. toctree::
    :hidden:

    prerequisites
    install/gcc


.. raw:: latex

    \clearpage


Configure
=========

This software is based on BASIS_, a meta-project developed at SBIA_ to ease and
standardize the software development, build, testing, and packaging. In particular,
CMake_, a cross-platform, open-source build system, is used for the configuration
of the software build. For detailed instructions on how to build a software based
on CMake, please refer to the `BASIS how-to guide on software installation`_.

In summary, the steps to configure the so-called build tree are:

1. Extract source files::

    tar -xzf gondola-1.0.0-source.tar.gz

2. Create build directory::

    mkdir gondola-1.0.0-build

3. Change to build directory::

    cd gondola-1.0.0-build

4. Run CMake to configure the build tree::

    ccmake -DBASIS_DIR:PATH=/path/to/basis ../gondola-1.0.0-source

   - Press ``c`` to configure the build system and ``e`` to ignore warnings.
   - Set ``CMAKE_INSTALL_PREFIX`` and other CMake variables and options.
   - Continue pressing ``c`` until the option ``g`` is available.
   - Then press ``g`` to generate the configuration files for the selected
     build tool.

See the BASIS how-to guide on software installation for a documentation of the
`default configuration options`_ provided by BASIS. The CMake options which
are in particular of interest for the build of GONDOLA are documented
:doc:`here <buildoptions>`.

.. toctree::
    :hidden:

    buildoptions


.. raw:: latex

    \clearpage


Build
=====

After the configuration of the build tree, GONDOLA can be build using `GNU Make`_::

    make


Test
====

After the build of the software, optionally run the tests using the command::

    make test

In case of failing tests, re-run the tests, but this time by executing CTest_
directly with the ``-V`` option to enable verbose output and redirect the output
to a text file:

.. code-block:: bash

    ctest -V >& gondola-test.log

And send the file ``gondola-test.log`` as attachment of the issue report to
``sbia-software at uphs.upenn.edu``.


Install
=======

The final installation copies the built files and additional data and documentation
files to the installation directory specified using the ``CMAKE_INSTALL_PREFIX``
option during the configuration of the build tree::

    make install
    
After the successful installation, the build directory can be removed again.

.. _BASIS: http://www.rad.upenn.edu/sbia/software/basis/
.. _BASIS how-to guide on software installation: http://www.rad.upenn.edu/sbia/software/basis/howto/install/
.. _CMake: http://www.cmake.org/
.. _CTest: http://www.cmake.org/cmake/help/v2.8.8/ctest.html
.. _default configuration options: http://www.rad.upenn.edu/sbia/software/basis/howto/install/#configure
.. _GNU Make: http://www.gnu.org/software/make/
.. _SBIA:  http://www.rad.upenn.edu/sbia/
